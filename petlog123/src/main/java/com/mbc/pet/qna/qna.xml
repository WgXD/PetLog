<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mbc.pet.qna.QnAService">
<!-- QnA 등록 -->
<insert id="insertqna">
	insert into qna(qna_id, user_id, qna_title, qna_content) 
	values(qna_seq.nextval, #{user_id},#{qna_title},#{qna_content})
</insert>

<!-- QnA 목록(누구나 조회 가능) -->
<select id="allqnalist" resultType="com.mbc.pet.qna.QnADTO">
	select q.qna_id, q.qna_title, q.qna_date, q.qna_status, qna_answer, u.user_login_id
	from qna q join user1 u on q.user_id = u.user_id
	order by q.qna_id desc
</select>

<!-- 자세히보기 -->
<select id="qnadetail" resultType="com.mbc.pet.qna.QnADTO">
	select qna_id, user_id, qna_title, qna_content, qna_status, qna_date, qna_answer
	from qna where qna_id = #{qna_id}
</select>

<!-- 관리자 답변 -->
<update id="updateqnswer" parameterType="com.mbc.pet.qna.QnADTO">
	update qna set qna_answer = #{qna_answer}, qna_status=#{qna_status} where qna_id = #{qna_id}
</update>
</mapper>