<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.mbc.pet.calendar.CalService">

	<select id="by_months" resultType="com.mbc.pet.calendar.CalDTO">
		select cal_id, cal_title, cal_content, pet_id, user_id, to_char(cal_date,'yyyy-MM-dd')cal_date from calendar
		where user_id = #{user_id}
		and to_char(cal_date, 'YYYY') = #{current_year}
		and to_char(cal_date, 'MM') = LPAD(#{current_month},2,'0')
		and pet_id = #{pet_id}
	</select>

	<!-- 달력에서 일정 직접 추가 -->
	<insert id="cal_save" parameterType="com.mbc.pet.calendar.CalDTO">
		insert into calendar (
		        cal_id,
        		cal_title,
        		cal_content,
        		pet_id,
        		user_id,
        		cal_date
    	)
		values (
			cal_seq.nextval,
			#{cal_title},
			#{cal_content},
			#{pet_id},
			#{user_id},
			TO_DATE(#{cal_date}, 'YYYY-MM-DD')
		)
	</insert>








</mapper>